<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="member">
	<select id="select_member" parameterType="map" resultType="map">
		select usr_id, pass_wd, usr_nm, gender, birth_dt, solar_yn, post_num1, post_num2
				, address1, address2, address3
                , mail_addr, tel_no, phone_no, rec_sms_yn, rec_mail_yn, terms_agree
                , collect_agree, reg_time, modify_time, mileage
             from member_master
            where usr_id = #{usr_id}
              and pass_wd = #{pass_wd}
	</select>
	
	<select id="select_id_bymail" parameterType="string" resultType="string">
		select usr_id from member_master
		 where mail_addr = #{param}
	</select>
	
	<select id="select_pwd_byidmail" parameterType="map" resultType="string">
		select pass_wd from member_master
		 where usr_id = #{usr_id}
		   and mail_addr = #{mail_addr}
	</select>
	
	<select id="select_duplicate" parameterType="string" resultType="int">
		select count(1) dup_cnt 
		  from member_master
		 where usr_id = #{param}
	</select>
  	
  	<insert id="insert_member" parameterType="map">
         insert into member_master (usr_id, pass_wd, usr_nm, gender, birth_dt, solar_yn
         		 , post_num1, post_num2, address1, address2, address3
                 , mail_addr, tel_no, phone_no, rec_sms_yn, rec_mail_yn, terms_agree
                 , collect_agree, reg_time, modify_time, mileage) values (
                 #{usr_id}, #{pass_wd}, #{usr_nm}, #{gender}, #{birth_dt}, #{solar_yn}
                 , #{post_num1}, #{post_num2}, #{address1}, #{address2}, #{address3}
                 , #{mail_addr}, #{tel_no}, #{phone_no}, #{rec_sms_yn}, #{rec_mail_yn}
                 , #{terms_agree}, #{collect_agree}, now(), now(), 0 )
  	</insert>
  	
  	<update id="update_member" parameterType="map">
  		update member_master 
  		       set pass_wd = #{pass_wd}
  		         , usr_nm = #{usr_nm}
  		         , gender = #{gender}
  		         , birth_dt = #{birth_dt}
  		         , solar_yn = #{solar_yn}
  		         , post_num1 = #{post_num1}
  		         , post_num2 = #{post_num2}
				 , address1 = #{address1}
				 , address2 = #{address2}
				 , address3 = #{address3}
  		         , mail_addr = #{mail_addr}
  		         , tel_no = #{tel_no}
  		         , phone_no = #{phone_no}
  		         , rec_sms_yn = #{rec_sms_yn}
  		         , rec_mail_yn = #{rec_mail_yn}
  		         , modify_time = now()
  		  where usr_id = #{usr_id}
  	</update>
  	
  	<update id="update_member_mileage" parameterType="map">
  		update member_master 
  		       set mileage = #{mileage}
  		  where usr_id = #{usr_id}
  	</update>
</mapper>